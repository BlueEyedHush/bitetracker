import {normalize} from 'normalizr';

const async = ({request, success, error, normalized}) => (...args) => {
  return request(...args)
    .then(response => success(normalize(response.data || response, normalized)))
    .catch(error);
};

export default function createAsync(actions) {
  const source = {};
  for (const prop in actions) {
    if (actions.hasOwnProperty(prop)) {
      source[prop] = async(actions[prop]);
    }
  }
  return source;
}
