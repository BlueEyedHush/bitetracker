
import axios from 'axios';
import MealsActions from 'client/app/actions/MealsActions';

const MEALS_PATH = '/api/foods';

const MealsSource = {
  fetch: (ndbno) => {
    return axios.get(`${MEALS_PATH}/${ndbno}`)
      .then(response => {
        const food = response.data.report.food;
        MealsActions.fetchNutrientsSuccess({ndbno: food.ndbno, nutrientsList: food.nutrients});
      })
      .catch(error => {
        // access response via error.response
        MealsActions.fetchNutrientsFailure(error);
      });
  }
};

export default MealsSource;
