export default ({remote, local}) => (...args) => {
  return new Promise((resolve, reject) => {
    let networkDataReceived = false;

    const networkUpdate = remote(...args).then(response => {
      return response;
    }).then(data => {
      networkDataReceived = true;
      resolve(data);
    });

    local(...args).then(response => {
      if (!response) throw Error("No data");
      return response.json();
    }).then(data => {
      if (!networkDataReceived) {
        resolve(data);
      }
    }).catch(() => {
      return networkUpdate;
    }).catch(reject);
  });
}
