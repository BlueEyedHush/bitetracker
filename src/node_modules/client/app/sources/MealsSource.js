
import moment from 'moment';

function getOffsetDateFromNow(offsetDays) {
  return moment().add(offsetDays, 'days');
}

const mealList = [
  {_id: '1', name: 'meal 1', date: getOffsetDateFromNow(-1)},
  {_id: '2', name: 'meal 2', date: getOffsetDateFromNow(0)},
  {_id: '3', name: 'meal 3', date: getOffsetDateFromNow(1)},
];
var nextId = 4;

function getMealList(date) {
  return mealList.filter(meal => date.isSame(meal.date, 'day'));
}

const MealsSource = {
  fetch: (date) => Promise.resolve(getMealList(date)),
  add: (date, name) => {
    mealList.push({_id: nextId.toString(), name, date});
    nextId += 1;
    return Promise.resolve(getMealList(date));
  }
};

export default MealsSource;
