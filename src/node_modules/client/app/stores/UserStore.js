import alt from 'alt-instance';

import UserActions from 'actions/UserActions';
import UserSource from 'sources/UserSource';

class UserStore {
  constructor() {
    this.user = {};

    this.bindListeners({
      handleFetchUser: UserActions.FETCH_USER,
      handleSetDailyIntake: UserActions.SET_DAILY_INTAKE,
    });
  }

  handleFetchUser() {
    UserSource.fetch()
      .then(({data}) => this.setState({user: data}));
  }

  handleSetDailyIntake(intake) {
    UserSource.setDailyIntake(intake)
      .then(({data}) => this.setState({user: data}));
  }
}

export default alt.createStore(UserStore, 'UserStore');
