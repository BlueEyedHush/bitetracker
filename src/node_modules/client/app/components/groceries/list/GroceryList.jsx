import React  from 'react'
import ListSchema from 'schemas/GroceryListSchema'
import GroceryListActions from 'actions/GroceryListActions'
import DeleteButton from 'sources/Svg'

import Item from './GroceryListItem'

import './grocery_list.scss'

const List = ({ list, onItemToggle }) => {
  /* comment from GroceriesView also applies here */
  let inputDomRef = null;

  return (
    <div>
      <div className="list-container">
        <h3>{list.title}</h3>
        <DeleteButton onClick={() => (GroceryListActions.removeList(list._id))}></DeleteButton>
      </div>
      <input type="text" ref={(ref) => inputDomRef = ref } placeholder="Add item.."/>
      <button className="add-item" onClick={() => (
        GroceryListActions.createItem(list._id, {
          name : inputDomRef.value,
          completed : false
        }),
        inputDomRef.value = ""
      )}>+</button>
      <ul className="grocery-list">
        {list.items.map(item => (
          <Item listId={list._id} item={item} key={item._id} onToggle={() => onItemToggle(item)} />
        ))}
      </ul>
    </div>
  );
}

List.propTypes = {
  list:         ListSchema.isRequired,
  onItemToggle: React.PropTypes.func.isRequired
};

export default List;
