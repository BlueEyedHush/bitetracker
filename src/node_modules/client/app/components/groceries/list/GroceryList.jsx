import React  from 'react'
import ListSchema from 'schemas/GroceryListSchema'
import GroceryListActions from 'actions/GroceryListActions'

import Item from './GroceryListItem'

import './grocery_list.scss'

function getInputValue(inputName){
  var value = document.getElementById(inputName).value
  document.getElementById(inputName).value = ''
  return value
}

function createItem(itemName){
  var item = {}
  item._id = itemName
  item.name = itemName
  item.completed = false
  return item
}

const List = ({ list, onItemToggle }) => (
    <div>
      <h3>{list.title}</h3>
      <input type="text" id="itemName" placeholder="Add item.."/>
      <button className="addItemButton" onClick={() => (
        GroceryListActions.addItem(list._id, createItem(getInputValue("itemName")))
      )}>+</button>
      <ul className="grocery-list">
        {list.items.map(item => (
            <Item listId={list._id} item={item} key={item._id} onToggle={() => onItemToggle(item)} />
        ))}
      </ul>
    </div>
);

List.propTypes = {
  list:         ListSchema.isRequired,
  onItemToggle: React.PropTypes.func.isRequired
};

export default List;
