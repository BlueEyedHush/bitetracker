import React from 'react';
import GroceryListActions from 'actions/GroceryListActions';
import GroceryListStore from 'stores/GroceryListStore';
import StoreStateSubscriber from 'mixins/StoreStateSubscriber';

import GroceriesView from './GroceriesView';

const groceryListSubscriber = StoreStateSubscriber(GroceryListStore);

export default class Groceries extends groceryListSubscriber(React.Component) {
  componentDidMount() {
    super.componentDidMount();
    GroceryListActions.fetchLists();
  }

  render() {
    const activeList = this.state.lists.find(list => list._id == this.props.params.id);

    return (
      <section className="c__groceries">
        <GroceriesView lists={this.state.lists}
                       activeList={activeList} />
      </section>
    );
  }
}
