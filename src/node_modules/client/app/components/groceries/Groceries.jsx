import { mix } from 'mixwith'
import React from 'react'
import GroceryListActions from 'actions/GroceryListActions'
import GroceryListStore from 'stores/GroceryListStore'
import StoreStateSubscriber from 'mixins/StoreStateSubscriber'

import GroceriesView from './GroceriesView'

export default class Groceries extends mix(React.Component).with(StoreStateSubscriber(GroceryListStore)) {
  componentDidMount() {
    super.componentDidMount();
    GroceryListActions.fetchLists();
  }

  render() {
    const activeList = this.state.lists.find(list => list._id == this.props.params.id);

    return (<GroceriesView lists={this.state.lists} activeList={activeList} />);
  }
}
