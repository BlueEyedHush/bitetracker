import React from 'react'
import GroceryListActions from 'actions/GroceryListActions'
import GroceryListStore from 'stores/GroceryListStore'
import StoreStateSubscriber from 'mixins/StoreStateSubscriber'

import GroceriesView from './GroceriesView'

const groceryListSubscriber = StoreStateSubscriber(GroceryListStore);

export default class Groceries extends groceryListSubscriber(React.Component) {
  componentDidMount() {
    super.componentDidMount();
    GroceryListActions.fetchLists();
  }

  onItemChange(event){
    return event.target.value
  }

  onItemSubmit(inputText){
      GroceryListActions.addList({
        _id : inputText,
        title: inputText,
        items : []
      })
  }

  render() {
    const activeList = this.state.lists.find(list => list._id == this.props.params.id);

    return (<GroceriesView lists={this.state.lists} inputText={this.state.inputText} activeList={activeList} onItemChange={this.onItemChange} onItemSubmit={this.onItemSubmit}/>);
  }
}
