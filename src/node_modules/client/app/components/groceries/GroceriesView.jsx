import React from 'react'
import { If, Then } from 'react-if'
import { Grid, Row, Col } from 'react-bootstrap'
import GroceryListActions from 'actions/GroceryListActions'

import Nav from './nav/GroceryListNav'
import ListContainer from './list/GroceryListContainer'


function getInputValue(inputName){
  var value = document.getElementById(inputName).value
  document.getElementById(inputName).value = ''
  return value
}

function createList(listName){
  var list = {}
  list._id = listName
  list.title = listName
  list.items = []
  return list
}

const Groceries = ({ lists, activeList }) => (
    <Grid>
      <Row>
        <Col xs={12} md={3}>
          <input type="text" id="listName" placeholder="List name.."/>
          <button className="addListButton" onClick={(item) => (
            GroceryListActions.addList(createList(getInputValue("listName")))
           )}>+</button>
          <Nav lists={lists} />
        </Col>
        <Col xs={12} md={9}>
          <If condition={activeList != null}>
            <Then>{() =>
                <ListContainer list={activeList} />}
            </Then>
          </If>
        </Col>
      </Row>
    </Grid>
);

Groceries.propTypes = {
  lists:      React.PropTypes.array.isRequired,
  activeList: React.PropTypes.object
};

export default Groceries;
