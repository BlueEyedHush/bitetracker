import React from 'react'
import { If, Then } from 'react-if'
import { Grid, Row, Col } from 'react-bootstrap'
import GroceryListActions from 'actions/GroceryListActions'

import ListNav from './nav/GroceryListNav'
import ListContainer from './list/GroceryListContainer'


const Groceries = ({ lists, activeList }) => {
  /* very dirty fix; since we are using Bootstrap, we probably shouldn't use such low level components as
   * input or button
   * and if we do, this should be turned into a stateful component - certainly lists cannot be modified - it's
   * used for comparisons during update procedure... */
  let inputDomRef = null;

  return (
    <Grid className="grocery-list">
      <Row>
        <Col xs={12} md={3}>
          <input type="text" ref={(ref) => inputDomRef = ref } placeholder="List name.."/>
          <button className="add-list" onClick={(item) => (
            GroceryListActions.createList({
              title: inputDomRef.value,
              items : []
            }),
            inputDomRef.value = ""
           )}>+</button>
          <ListNav lists={lists} />
        </Col>
        <Col xs={12} md={9}>
          <If condition={activeList != null}>
            <Then>{() =>
              <ListContainer list={activeList} />}
            </Then>
          </If>
        </Col>
      </Row>
    </Grid>
  );
}

Groceries.propTypes = {
  lists:      React.PropTypes.array.isRequired,
  activeList: React.PropTypes.object
};

export default Groceries;
