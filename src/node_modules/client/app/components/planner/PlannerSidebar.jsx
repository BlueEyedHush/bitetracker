import React, {PropTypes} from 'react';
import RecipesStore from 'stores/RecipesStore';
import PlannerActions from 'actions/PlannerActions';
import StoreStateSubscriber from 'mixins/StoreStateSubscriber';

import RecipeSearch from './RecipeSearch';
import RecipeResults from './RecipeResults';

const recipeSubscriber = StoreStateSubscriber(RecipesStore);

class PlannerSidebar extends recipeSubscriber(React.Component) {
  render() {
    return (
      <div style={{overflow: 'auto'}}>
        <RecipeSearch />
        {
          this.state.recipes ? (
            <RecipeResults
              recipes={this.state.recipes}
              onRecipeAdd={(recipe, date, meal) => PlannerActions.addRecipe(recipe, date, meal)}
              onRecipeSet={(recipe) => PlannerActions.showModal({recipe})} />
          ) : null
        }
      </div>
    );
  }
}

PlannerSidebar.propTypes = {};

export default PlannerSidebar;
