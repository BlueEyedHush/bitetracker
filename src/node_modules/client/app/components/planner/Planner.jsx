import React from 'react';
import PlannerStore from 'stores/PlannerStore';
import PlannerActions from 'actions/PlannerActions';
import StoreStateSubscriber from 'mixins/StoreStateSubscriber';

import AddRecipeModal from './AddRecipeModalContainer';
import PlannerView from './PlannerView';

const PlannerSubscriber = StoreStateSubscriber(PlannerStore);

class Planner extends PlannerSubscriber(React.Component) {
  componentDidMount() {
    super.componentDidMount();
    PlannerActions.fetchPlanner();
  }

  render() {
    return (
      <div style={{height: '100%'}}>
        <AddRecipeModal />
        <PlannerView planner={this.state.planner}
                     onEntryClick={(date, meal) => PlannerActions.showModal({date, meal})} />
      </div>
    );
  }
}

export default Planner;
