import React from 'react';

import AddMeal from './AddMeal';

const INITIAL_STATE = {value: ''};

export default class AddMealContainer extends React.Component {
  constructor(...args) {
    super(...args);

    this.state = INITIAL_STATE;

    this.valueChanged = this.valueChanged.bind(this);
    this.buttonClicked = this.buttonClicked.bind(this);
  }

  valueChanged(value) {
    this.setState({value: value ? value.name : INITIAL_STATE.value});
  }

  buttonClicked() {
    this.props.onAdd(this.state.value);
    this.setState(INITIAL_STATE);
  }

  render() {
    return (
      <AddMeal value={this.state.value}
                placeholder={this.props.placeholder}
                onChange={this.valueChanged}
                onSubmit={this.buttonClicked} />
    );
  }
}

AddMealContainer.propTypes = {
  placeholder: React.PropTypes.string,
  onAdd: React.PropTypes.func,
};

AddMealContainer.defaultProps = {
  placeholder: '',
  onAdd: (value) => {}
};
