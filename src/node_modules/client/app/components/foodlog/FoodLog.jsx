import React from 'react';

import {Grid, Row} from 'react-bootstrap';
import ListGroup from 'react-bootstrap/lib/ListGroup';
import ListGroupItem from 'react-bootstrap/lib/ListGroupItem';
import DatePicker from 'react-bootstrap-date-picker';
import AddMeal from './AddMeal';
import TodayNutrients from './TodayNutrients';

import MealSchema from 'client/app/proptypes/schemas/MealSchema';
import './foodlog.scss';

const FoodLog = ({date, onDateChanged, meals, onMealAdded, dataReady, nutrientValues, nutrientUnits}) => {
  return (
    <section className="c__foodlog">
      <Grid>
        <Row>
          <h2>Food Log</h2>
          <DatePicker value={date} onChange={value => onDateChanged(value)} />
          <ListGroup className="mealsList">
            {meals.map(meal => (<ListGroupItem key={meal._id}>{meal.name}</ListGroupItem>))}
          </ListGroup>
          <AddMeal onAdd={value => onMealAdded(value)} />
          <TodayNutrients dataReady={dataReady} values={nutrientValues} units={nutrientUnits} />
        </Row>
      </Grid>
    </section>
  );
};

FoodLog.propTypes = {
  date: React.PropTypes.string.isRequired, /* ISOString */
  onDateChanged: React.PropTypes.func,
  meals: React.PropTypes.arrayOf(MealSchema).isRequired,
  onMealAdded: React.PropTypes.func,
};

FoodLog.defaultProps = {
  onDateChanged: (dateStr) => {},
  onMealAdded: (mealName) => {},
};

export default FoodLog;
