import React from 'react'

import storeStateSubscriberCreator from 'client/app/mixins/StoreStateSubscriber';

import MealsStore from 'client/app/stores/MealsStore';
import MealsCrudActions from 'client/app/actions/MealsCrudActions';

import ListGroup from 'react-bootstrap/lib/ListGroup';
import ListGroupItem from 'react-bootstrap/lib/ListGroupItem';
import AddInput from 'client/app/components/shared/form/AddInput';

const FoodLogView = ({meals}) => {
  return (
    <div>
      <h2>Food Log</h2>
      <ListGroup>
        {meals.map(m => (<ListGroupItem key={m._id}>{m.name}</ListGroupItem>))}
      </ListGroup>
      <AddInput placeholder="Add meal"/>
    </div>
  )
};

const MealsStoreStateSubscriber = storeStateSubscriberCreator(MealsStore);
export default class FoodLogViewContainer extends MealsStoreStateSubscriber(React.Component) {
  componentDidMount() {
    super.componentDidMount();
    MealsCrudActions.fetchMeals();
  }

  render() {
    return (<FoodLogView meals={this.state.meals}/>);
  }
}