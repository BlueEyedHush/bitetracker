'use strict';

import {expressHandler} from 'tests/server/integration/utils';
import request from 'supertest-as-promised';

describe('Food API:', () => {
  describe('GET /api/foods', () => {
    var foods;

    var eh;
    before(() => expressHandler().then(_ => eh = _));

    beforeEach(() => {
      return request(eh)
        .get('/api/foods')
        .expect(200)
        .expect('Content-Type', /json/)
        .then(res => { foods = res.body; });
    });

    it('should respond with JSON array', () => {
      foods.should.have.deep.property('list.item');
      foods.list.item.should.be.instanceof(Array);
    });
  });
});
