/* eslint no-console: 0 */
/**
 * Populate DB with sample data on server start
 * to disable, edit config/environment/index.js, and set `seedDB: false`
 */

'use strict';
import Recipe from '../api/recipe/recipe.model';
import User from '../api/user/user.model';
import GroceryList from '../api/grocery_list/grocery_list.model';
import Planner from '../api/planner/planner.model';

User.find({}).removeAsync()
  .then(() => {
    User.createAsync({
      provider: 'local',
      name: 'test',
      email: 'test@example.com',
      password: 'test',
    }, {
      provider: 'local',
      role: 'admin',
      name: 'admin',
      email: 'admin@example.com',
      password: 'admin',
    })
      .then(() => {
        console.log('finished populating users');
      });
  });

Recipe.find({}).removeAsync()
  .then(() => {
    Recipe.create({
      title: 'Dark Chocolate Cupcakes',
      author: 'test',
      description: 'Treat the chocolate lovers of your family with this delicious cupcake - a perfect baked dessert.',
      ingredients: [
        {
          name: 'Dark chocolate chips',
          unit: '1 1/3 cups'
        },
        {
          name: 'Butter',
          qty: 1/4,
          unit: 'cup',
          note: 'cut into small pieces'
        },
        {
          name: 'Whipping cream',
          qty: 1,
          unit: 'cup'
        },
        {
          name: 'All-purpouse flour',
          qty: 1,
          unit: 'cup'
        },
        {
          name: 'Baking soda',
          qty: 1/2,
          unit: 'tsp'
        },
        {
          name: 'Salt',
          qty: 1/2,
          unit: 'tsp'
        },
        {
          name: 'Baking powder',
          qty: 1/4,
          unit: 'tsp'
        },
        {
          name: 'Unsweetend baking cocoa',
          qty: 1/3,
          unit: 'cup'
        },
        {
          name: 'Sugar',
          qty: 3/4,
          unit: 'cup'
        },
        {
          name: 'Vanilla',
          qty: 1/2,
          unit: 'tsp'
        },
        {
          name: 'Egg',
          qty: 1
        }
      ],
      instructions: '1. In small microwavable bowl, microwave 2 tablespoons chocolate chips uncovered on High 1 minute, until melted, stirring once halfway through heating. Pour chocolate onto 12 x10-inch sheet of waxed paper; spread in thin layer, forming 3 x3-inch square. Place second 12 x10-inch sheet of waxed paper over chocolate square; press to release air bubbles. Roll waxed paper tightly into a cylinder. Regenerate until set. \n' +
      '2. In medium heat- place 1 1/3 cups chocolate chips and 1/4 cup butter. In small microwavable bowl, microwave whipping cream on High about 1 minute or until cream just begins to simmer. Pour cream over chips and butter; beat with whisk until chocolate is melted and mixture is smooth and shiny. Refrigerate 30 to 45 minutes until completely cooled, stirring occasionally. \n' +
    '3. Heat oven to 350°F (325°F for dark or nonstick pans). Place Reynolds Baking Cups in each of 12 regular-size muffin cups. In medium bowl, mix flour, baking soda, salt and baking powder; set aside. In small bowl, mix boiling water and cocoa until dissolved. \n' +
    '4. In large bowl, beat 1/2 cup butter with electric mixer on medium speed 30 seconds. Gradually add sugar, beating well. Beat 2 more minutes. Beat in vanilla and egg until blended. On low, alternatively add flour mixture and cocoa mixture, beating just until blended. Divide batter among muffin cups. Bake 20 to 25 minutes or until toothpick comes out clean. Cool 5 minutes. Remove from pan to cooling racks. Cool completely. \n' +
    '5. Beat frosting with electric mixture on medium speed until light and fluffy, about 30 seconds (Do not overheat.) Fit decorating bag with large star tip. Fill bag with frosting. Pipe frosting in circular top of each cupcake and mounding frosting slightly in center. \n' +
    '6. Unroll waxed paper cylinder, causing chocolate to crack creating shards. Garnish each cupcake with chocolate shards. Store in refrigerator.',
      image: 'http://images-gmi-pmc.edge-generalmills.com/7ab641d5-54c0-41e1-8458-e8b26805a680.jpg'
    }, {
      title: 'Spaghetti Bolognese',
      author: 'test',
      description: 'Good Food reader, Andrew Balmer shares his recipe for the ultimate spaghetti Bolognese, deliciously meaty with a chilli kick.',
      ingredients: [
        {
          name: 'Olive oil',
          qty: 1,
          unit: 'tbsp'
        },
        {
          name: 'Smoked streaky bacon',
          qty: 4,
          unit: 'rashers',
          note: 'finely chopped'
        },
        {
          name: 'Medium onions',
          qty: 2,
          unit: '',
          note: 'finely chopped'
        },
        {
          name: 'Carrots',
          qty: 2,
          unit: '',
          note: 'trimmed and finely chopped'
        },
        {
          name: 'Celery sticks',
          qty: 2,
          unit: 'pieces',
          note: 'finely chopped'
        },
        {
          name: 'Garlic cloves',
          qty: 2,
          unit: '',
          note: 'finely chopped'
        },
        {
          name: 'Rosemary, leaves picked',
          qty: 2,
          unit: 'sprigs',
          note: 'finely chopped'
        },
        {
          name: 'Beef',
          qty: 500,
          unit: 'g',
          note: ''
        },
        {
          name: '2x tins plum tomatoes',
          qty: 400,
          unit: 'g',
          note: ''
        },
        {
          name: 'Basil, leaves picked',
          qty: 1,
          unit: 'small pack',
          note: '3/4 finely chopped and the rest left whole for garnish'
        },
        {
          name: 'Dried oregano',
          qty: 1,
          unit: 'tbsp',
          note: ''
        },
        {
          name: 'Fresh bay leaves',
          qty: 2,
          unit: '',
          note: ''
        },
        {
          name: 'Tomato puree',
          qty: 2,
          unit: 'tbsp',
          note: ''
        },
        {
          name: 'Beef stock cube',
          qty: 1,
          unit: '',
          note: ''
        },
        {
          name: 'Red chili',
          qty: 1,
          unit: '',
          note: 'seeded and finely chopped (optional)'
        },
        {
          name: 'Red wine',
          qty: 125,
          unit: 'ml',
          note: ''
        },
        {
          name: 'Cherry tomatoes',
          qty: 6,
          unit: '',
          note: 'Sliced in half'
        },
        {
          name: 'Parmesan',
          qty: 75,
          unit: 'g',
          note: 'Grated, plus extra to serve'
        },
        {
          name: 'Spaghetti pasta',
          qty: 400,
          unit: 'g',
          note: ''
        },
        {
          name: 'Crusty bread (optional)',
          qty: 1,
          unit: '',
          note: ''
        }
      ],
      instructions: '1. Put a large heavy-based saucepan on a medium heat and add 1 tbsp olive oil. Add the bacon and fry for 10 mins until golden and crisp. Reduce the heat and add the onion, carrot, celery, garlic and rosemary then fry for 10 mins, stirring often, until the veg has softened. Increase the heat to medium-high, add the mince and cook stirring for 3-4 mins until the meat is browned all over. \n' +
      '2. Add the tinned tomatoes, chopped basil, oregano, bay leaves, tomato purée, stock cube, chilli, wine and cherry tomatoes. Stir with a wooden spoon, breaking up the plum tomatoes. Bring to the boil, reduce to a gentle simmer and cover with a lid. Cook for 1 hr 15 mins stirring occasionally, until you have a rich, thick sauce. Add the Parmesan, check the seasoning and stir. \n ' +
      '3. When the Bolognese is nearly finished cook the spaghetti following pack instructions. Drain the spaghetti and stir into the Bolognese sauce. Serve with grated Parmesan the extra basil leaves and crusty bread, if you like.',
      image: 'http://orsimages.unileversolutions.com/ORS_Images/Knorr_en-GB/Knorr-nowy-bok10075-1_16_1.1.563_326X580.Jpeg'
    }, {
      title: 'Spaghetti Carbonara',
      author: 'test',
      description: 'Discover how to make the perfect Spaghetti carbonara - with a little help from Gennaro Contaldo',
      ingredients: [
        {
          name: 'Pancetta',
          qty: 100,
          unit: 'g',
          note: ''
        },
        {
          name: 'Pecorino cheese',
          qty: 50,
          unit: 'g',
          note: ''
        },
        {
          name: 'Parmesan',
          qty: 50,
          unit: 'g',
          note: ''
        },
        {
          name: 'Large egg',
          qty: 3,
          unit: '',
          note: ''
        },
        {
          name: 'Spaghetti pasta',
          qty: 350,
          unit: 'g',
          note: 'De Cecco is very good'
        },
        {
          name: 'Garlic clove',
          qty: 2,
          unit: 'plump',
          note: 'Peeled and left whole'
        },
        {
          name: 'Unsalted butter',
          qty: 50,
          unit: 'g',
          note: ''
        },
        {
          name: 'Maldon salt and freshly grated black pepper',
          qty: 1,
          unit: '',
          note: ''
        }
      ],
      instructions: '1. Put a large saucepan of water on to boil. Finely chop the pancetta, having first removed any rind. Finely grate both cheeses and mix them together. Beat the eggs in a medium bowl, season with a little freshly grated black pepper and set everything aside. \n' +
      '2. Add 1 tsp salt to the boiling water, add the spaghetti and when the water comes back to the boil, cook at a constant simmer, covered, for 10 minutes or until al dente (just cooked). \n' +
      '3. Squash the garlic with the blade of a knife, just to bruise it. While the spaghetti is cooking, fry the pancetta with the garlic. Drop the butter into a large wide frying pan or wok and, as soon as the butter has melted, tip in the pancetta and garlic. Leave these to cook on a medium heat for about 5 minutes, stirring often, until the pancetta is golden and crisp. The garlic has now imparted its flavour, so take it out with a slotted spoon and discard. \n' +
      '4. Keep the heat under the pancetta on low.When the pasta is ready lift it from the water with a pasta fork or tongs and put it in the frying pan with the pancetta (see left). Don’t worry if a little water drops in the pan as well (you want this to happen) and don’t throw the rest of the pasta water away yet. \n' +
      '5. Mix most of the cheese in with the eggs, keeping a small handful back for sprinkling over later. Take the pan of spaghetti and pancetta off the heat. Now quickly pour in the eggs and cheese and, using the tongs or a long fork, lift up the spaghetti so it mixes easily with the egg mixture, which thickens but doesn’t scramble, and everything is coated. Add extra pasta cooking water to keep it saucy (several tablespoons should do it). You don’t want it wet, just moist. Season with a little salt, if needed. \n' +
      '6. Use a long-pronged fork to twist the pasta on to the serving plate or bowl. Serve immediately with a little sprinkling of the remaining cheese and a grating of black pepper. If the dish does get a little dry before serving, splash in some more hot pasta water and the glossy sauciness will be revived.',
      image: 'http://3.bp.blogspot.com/-D7Pfe_GJgpI/UKAr66IQARI/AAAAAAAAF9w/XlT5u1HfrK0/s1600/spaghetti+carbonara7.jpg'
    }, {
      title: 'Spaghetti and Meatballs',
      author: 'test',
      description: 'Get everyone to help rolling meatballs and you\'ll soon have one supper on the table and another in the freezer',
      ingredients: [
        {
          name: 'Good-quality pork sausages',
          qty: 8,
          unit: '',
          note: ''
        },
        {
          name: 'Beef mince',
          qty: 1,
          unit: 'kg',
          note: ''
        },
        {
          name: 'Onion',
          qty: 1,
          unit: '',
          note: 'finely chopped'
        },
        {
          name: 'Flat-leaf parsley',
          qty: 1/2,
          unit: 'a large bunch',
          note: 'finely chopped'
        },
        {
          name: 'Parmesan cheese',
          qty: 85,
          unit: 'g',
          note: 'Plus extra to serve if you like'
        },
        {
          name: 'Fresh breadcumbs',
          qty: 100,
          unit: 'g',
          note: ''
        },{
          name: 'Eggs',
          qty: 2,
          unit: '',
          note: 'beaten with a fork'
        },
        {
          name: 'Olive oil',
          qty: 1,
          unit: '',
          note: 'for roasting'
        },
        {
          name: 'Spaghetti pasta',
          qty: 100,
          unit: 'g',
          note: 'per portion'
        },
      ],
      instructions: '1. First make the meatballs. Split the sausage skins and squeeze out the meat into your largest mixing bowl. Add the mince, onion, parsley, Parmesan, breadcrumbs, beaten eggs and lots of seasoning. Get your hands in and mix together really well – the more you squeeze and mash the mince, the more tender the meatballs will be. \n' +
        '2. Heat oven to 220C/200C fan/gas 7. Roll the mince mixture into about 50 golf-ball-size meatballs. Set aside any meatballs for freezing, allowing about 5 per portion, then spread the rest out in a large roasting tin – the meatballs will brown better if spaced out a bit. Drizzle with a little oil (about 1 tsp per portion), shake to coat, then roast for 20-30 mins until browned. \n ' +
      '3. Meanwhile, make the sauce. Heat the oil in your largest pan. Add the garlic and sizzle for 1 min. Stir in the tomatoes, wine, if using, sugar, parsley and seasoning. Simmer for 15-20 mins until slightly thickened. Stir in the basil leaves, if using, spoon out any portions for freezing, then add the cooked meatballs to the pan to keep warm while you boil the spaghetti. Spoon the sauce and meatballs over spaghetti, or stir them all together and serve with extra Parmesan and a few basil leaves, if you like.',
      image: 'https://fastapasta.com/wp-content/uploads/2015/06/spaghetti-and-meatballs.jpg'
    }, {
      title: 'Garlic Spaghetti',
      author: 'test',
      description: '5 ingredients. 20 minutes. With melted butter, garlic and freshly grated Parmesan. A winning combination for the ENTIRE family!',
      ingredients: [
        {
          name: 'Spaghetti pasta',
          qty: 8,
          unit: 'ounces',
          note: ''
        },
        {
          name: 'Unsalted butter',
          qty: 10,
          unit: 'tbsp',
          note: ''
        },
        {
          name: 'Garlic, minced',
          qty: 3,
          unit: 'cloves',
          note: ''
        },
        {
          name: 'Crushed red pepper flakes, optional',
          qty: 1,
          unit: 'tsp',
          note: ''
        },
        {
          name: 'Freshly grated Parmesan cheese',
          qty: 1/2,
          unit: 'cup',
          note: ''
        },
        {
          name: 'Kosher salt and freshly ground black pepper, to taste',
          qty: 1,
          unit: '',
          note: ''
        },{
          name: 'Chopped fresh parsley leaves',
          qty: 2,
          unit: 'tbsp',
          note: ''
        }
      ],
      instructions: '1. In a large pot of boiling salted water, cook pasta according to package instructions; drain well.\n' +
      '2. In a medium saucepan, combine butter, garlic and red pepper flakes over medium heat until the butter has melted. Cook, whisking constantly, until the foam subsides and the butter begins to turn a golden brown, about 4-5 minutes, skimming foam as necessary.\n' +
      '3. Remove from heat. Stir in pasta and Parmesan until well combined, about 2 minutes; season with salt and pepper, to taste.\n'+
      '4. Serve immediately, garnished with parsley, if desired.',
      image: 'http://assets.marthastewart.com/styles/wmax-520-highdpi/d29/spaghetti-garlic-oil-mslb7004/spaghetti-garlic-oil-mslb7004_vert.jpg?itok=__XQ1tfq'
    }, {
      title: 'Parsley Pesto Spaghetti',
      author: 'test',
      description: 'Swapping traditional basil for flat-leaf parsley for this pesto recipe makes for a balanced sauce that allows you to really taste the nuts, the olive oil, the Parmesan.',
      ingredients: [
        {
          name: 'Spaghetti pasta',
          qty: 1,
          unit: 'lbs',
          note: ''
        },
        {
          name: 'Kosher salt',
          qty: 1,
          unit: '',
          note: ''
        },
        {
          name: 'Unsalted, roasted almonds',
          qty: 1/2,
          unit: 'cup',
          note: ''
        },
        {
          name: 'flat-leaf parsley leaves',
          qty: 4,
          unit: 'cups',
          note: ''
        },
        {
          name: 'Chopped chives',
          qty: 3/4,
          unit: 'cup',
          note: ''
        },
        {
          name: 'Extra-virgin olive oil',
          qty: 3/4,
          unit: 'cup',
          note: ''
        },
        {
          name: 'finely granted Parmesan cheese',
          qty: 1/2,
          unit: 'cup',
          note: ''
        },
        {
          name: 'Freshly ground black pepper',
          qty: 1,
          unit: '',
          note: ''
        },
      ],
      instructions: 'Cook pasta in a large pot of boiling salted water, stirring occasionally, until al dente. Drain, reserving 2 cups pasta cooking liquid. \n' +
      'Meanwhile, pulse almonds in a food processor until smooth. Add parsley, chives, oil, and Parmesan; process until smooth. Season pesto with salt and pepper. \n' +
      'Toss pasta and pesto in a large bowl, adding pasta cooking liquid by 1/4-cupfuls until saucy. Season with salt and pepper.',
      image: 'http://cdn-image.myrecipes.com/sites/default/files/styles/300x300/public/image/recipes/ck/13/08/spaghetti-parsley-pesto-sausage-ck-x.jpg?itok=i20bLFRB'
    });
  });

GroceryList.find({}).removeAsync()
  .then(() =>
    GroceryList.create({
      title: 'A list',
      items: [{name: 'Item 1'}, {name: 'Item 2'}],
    }, {
      title: 'Another list',
      items: [{name: 'a'}, {name: 'b'}, {name: 'c'}],
    })
  )
  .then(() => console.log('finished populating grocery lists'));

Planner.find({}).removeAsync();
