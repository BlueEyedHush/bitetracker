/* eslint no-console: 0 */
/**
 * Populate DB with sample data on server start
 * to disable, edit config/environment/index.js, and set `seedDB: false`
 */

'use strict';
import Recipe from '../api/recipe/recipe.model';
import User from '../api/user/user.model';
import GroceryList from '../api/grocery_list/grocery_list.model';
import Planner from '../api/planner/planner.model';

User.find({}).removeAsync()
  .then(() => {
    User.createAsync({
      provider: 'local',
      name: 'test',
      email: 'test@example.com',
      password: 'test',
    }, {
      provider: 'local',
      role: 'admin',
      name: 'admin',
      email: 'admin@example.com',
      password: 'admin',
    })
      .then(() => {
        console.log('finished populating users');
      });
  });

Recipe.find({}).removeAsync()
  .then(() => {
    Recipe.create({
      title: 'Dark Chocolate Cupcakes',
      author: 'test',
      description: 'Treat the chocolate lovers of your family with this delicious cupcake - a perfect baked dessert.',
      ingredients: [
        {
          name: 'Dark chocolate chips',
          unit: '1 1/3 cups'
        },
        {
          name: 'Butter',
          qty: 1/4,
          unit: 'cup',
          note: 'cut into small pieces'
        },
        {
          name: 'Whipping cream',
          qty: 1,
          unit: 'cup'
        },
        {
          name: 'All-purpouse flour',
          qty: 1,
          unit: 'cup'
        },
        {
          name: 'Baking soda',
          qty: 1/2,
          unit: 'tsp'
        },
        {
          name: 'Salt',
          qty: 1/2,
          unit: 'tsp'
        },
        {
          name: 'Baking powder',
          qty: 1/4,
          unit: 'tsp'
        },
        {
          name: 'Unsweetend baking cocoa',
          qty: 1/3,
          unit: 'cup'
        },
        {
          name: 'Sugar',
          qty: 3/4,
          unit: 'cup'
        },
        {
          name: 'Vanilla',
          qty: 1/2,
          unit: 'tsp'
        },
        {
          name: 'Egg',
          qty: 1
        }
      ],
      instructions: '1. In small microwavable bowl, microwave 2 tablespoons chocolate chips uncovered on High 1 minute, until melted, stirring once halfway through heating. Pour chocolate onto 12 x10-inch sheet of waxed paper; spread in thin layer, forming 3 x3-inch square. Place second 12 x10-inch sheet of waxed paper over chocolate square; press to release air bubbles. Roll waxed paper tightly into a cylinder. Regenerate until set. \n' +
      '2. In medium heat- place 1 1/3 cups chocolate chips and 1/4 cup butter. In small microwavable bowl, microwave whipping cream on High about 1 minute or until cream just begins to simmer. Pour cream over chips and butter; beat with whisk until chocolate is melted and mixture is smooth and shiny. Refrigerate 30 to 45 minutes until completely cooled, stirring occasionally. \n' +
    '3. Heat oven to 350°F (325°F for dark or nonstick pans). Place Reynolds Baking Cups in each of 12 regular-size muffin cups. In medium bowl, mix flour, baking soda, salt and baking powder; set aside. In small bowl, mix boiling water and cocoa until dissolved. \n' +
    '4. In large bowl, beat 1/2 cup butter with electric mixer on medium speed 30 seconds. Gradually add sugar, beating well. Beat 2 more minutes. Beat in vanilla and egg until blended. On low, alternatively add flour mixture and cocoa mixture, beating just until blended. Divide batter among muffin cups. Bake 20 to 25 minutes or until toothpick comes out clean. Cool 5 minutes. Remove from pan to cooling racks. Cool completely. \n' +
    '5. Beat frosting with electric mixture on medium speed until light and fluffy, about 30 seconds (Do not overheat.) Fit decorating bag with large star tip. Fill bag with frosting. Pipe frosting in circular top of each cupcake and mounding frosting slightly in center. \n' +
    '6. Unroll waxed paper cylinder, causing chocolate to crack creating shards. Garnish each cupcake with chocolate shards. Store in refrigerator.',
      image: 'http://images-gmi-pmc.edge-generalmills.com/7ab641d5-54c0-41e1-8458-e8b26805a680.jpg'
    }, {
      title: 'Spaghetti Bolognese',
      author: 'test',
      image: 'http://orsimages.unileversolutions.com/ORS_Images/Knorr_en-GB/Knorr-nowy-bok10075-1_16_1.1.563_326X580.Jpeg'
    }, {
      title: 'Spaghetti Carbonara',
      author: 'test',
      image: 'http://3.bp.blogspot.com/-D7Pfe_GJgpI/UKAr66IQARI/AAAAAAAAF9w/XlT5u1HfrK0/s1600/spaghetti+carbonara7.jpg'
    }, {
      title: 'Spaghetti and Meatballs',
      author: 'test',
      image: 'https://fastapasta.com/wp-content/uploads/2015/06/spaghetti-and-meatballs.jpg'
    }, {
      title: 'Garlic Spaghetti',
      author: 'test',
      image: 'http://assets.marthastewart.com/styles/wmax-520-highdpi/d29/spaghetti-garlic-oil-mslb7004/spaghetti-garlic-oil-mslb7004_vert.jpg?itok=__XQ1tfq'
    }, {
      title: 'Parsley Pesto Spaghetti',
      image: 'http://cdn-image.myrecipes.com/sites/default/files/styles/300x300/public/image/recipes/ck/13/08/spaghetti-parsley-pesto-sausage-ck-x.jpg?itok=i20bLFRB'
    });
  });

GroceryList.find({}).removeAsync()
  .then(() =>
    GroceryList.create({
      title: 'A list',
      items: [{name: 'Item 1'}, {name: 'Item 2'}],
    }, {
      title: 'Another list',
      items: [{name: 'a'}, {name: 'b'}, {name: 'c'}],
    })
  )
  .then(() => console.log('finished populating grocery lists'));

Planner.find({}).removeAsync();
